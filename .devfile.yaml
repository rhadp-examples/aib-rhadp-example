schemaVersion: 2.3.0
metadata:
  name: aib-rhadp-example
  tags:
    - automotive
    - rhivos
    - jumpstarter
components:
  - name: runtime
    container:
      image: ghcr.io/rhadp/codespaces:latest
      memoryLimit: "4Gi"
      memoryRequest: "1Gi"
      cpuLimit: "4"
      cpuRequest: "1"
      mountSources: true
      # environment variables
      env:
        - name: JUMPSTARTER_GRPC_ENDPOINT
          value: "jumpstarter-grpc.rhadp-jumpstarter.svc.cluster.local" # alternative: "https://grpc.rhadp.<cluster_base_domain>"
commands:
  - id: init-workspace
    exec:
      component: runtime
      commandLine: |
        /home/tooling/.scripts/init-workspace
events:
  postStart:
    - init-workspace
